<!DOCTYPE html>
<html class="no-js full-height" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title><%= content_for?(:title) ? yield(:title) : "Transiterm" %></title>
    <%= stylesheet_link_tag "application", media: "all" %>
    <%= csrf_meta_tags %>
  </head>

  <body>

    <div class="row no-margin">

      <!-- SIDEBAR -->
      <div class="small-4 medium-3 large-2 columns no-padding sidebar" id="sidebar">

        <!-- Icon row -->
        <div class="row">
          <div class="small-11 small-offset-1 small-centered columns">
            <%= link_to image_tag("T.png", class: "logo", alt:"Transiterm logo"), user_collections_path(current_user) %>
          </div>
        </div>

        <!-- Collections list row -->
        <% if @collections %>
          <div class="row full-width no-margin">
            <h5>List collections with:</h5>
              <div class="small-4 columns no-padding hide-for-large">
                <%= link_to "EN", "#{user_collections_path(@user)}?lang_toggle=english", class: "language selector #{ 'active' if @user.english_active == true }" %>
              </div>

            <a href="#"><div class="small-4 columns no-padding hide-for-large"><span class="language selector active">FR</span></div></a>

            <a href="#"><div class="small-4 columns no-padding hide-for-large"><span class="language selector">SP</span></div></a>

            <a href="#"><div class="small-4 columns no-padding show-for-large"><span class="language selector active">English</span></div></a>

            <a href="#"><div class="small-4 columns no-padding show-for-large"><span class="language selector active">French</span></div></a>

            <a href="#"><div class="small-4 columns no-padding show-for-large"><span class="language selector">Spanish</span></div></a>
          </div>

          <div class="row full-width collections-container">
            <div class="small-12 small-centered columns full-width no-margin no-padding">

            <h5>Select collections</h5>
              <a href="<%= user_collections_path %>"><div class="collection selector active" id="select-all">All collections</div></a>
              <% @collections.each do |c| %>
                <a href="<%= user_collection_path(@user, c) %>"><div class="collection selector"><%= c.title %></div></a>
              <% end %>
            </div>
          </div>
        <% else %>
          <strong><%= link_to "←  Back to collections", user_collections_path(current_user), class: "button tiny c-secondary" %></strong>
        <% end %>

        <!-- Add button and Login/settings row -->
        <div class="row cling-bottom full-width">
          <div class="small-12 columns full-width">
            <% if @collections %>
              <%= link_to "Add collection", new_user_collection_path(current_user), class: "button tiny c-secondary" %>
            <% end %>
          </div>

          <div class="small-12 columns settings full-width"
            <div class="row">
              <div class="small-6 columns">
                <%= link_to "My Transiterm", edit_user_path(current_user) %>
              </div>
              <div class="small-6 columns">
                <%= form_tag(logout_path) do %>
                  <%= submit_tag "Log out", id: "logout-link" %>
                <% end %>
              </div>
            </div>
          </div>
        </div>

        <main class="small-8 medium-8 medium-offset-1 large-9 columns full-height">

          <!-- Alerts section -->
          <div class="row">
            <div class="small-12 small-centered columns">
              <% if flash[:notice] %>
                <div data-alert class="alert-box info">
                  <%= flash[:notice] %>
                  <a href="#" class="close">&times;</a>
                </div>
              <% elsif flash[:alert] %>
                <div data-alert class="alert-box alert">
                  <%= flash[:alert] %>
                  <a href="#" class="close">&times;</a>
                </div>
              <% elsif flash[:success] %>
                <div data-alert class="alert-box success">
                  <%= flash[:success] %>
                  <a href="#" class="close">&times;</a>
                </div>
              <% end %>
            </div>
          </div>

          <%= yield %>
        </main>
      </div>

    </div>
    <%= javascript_include_tag "application" %>
  </body>
</html>
