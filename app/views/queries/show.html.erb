<% content_for :sidebar_meat do %>
	<%= render 'query_sidebar' %>
<% end %>

<% content_for :add_button_area do %>
  <%= link_to "Add collection", new_collection_path, class: "button tiny c-secondary" %>
<% end %>

<div class="row full-width">
	<div class="small-8 columns">
		<!-- <h1>Transiterm search </h1> -->
		<h5 class="subheader">
			<% if @selected_collections.empty? %>
				&larr; Use sidebar to activate languages and choose collections to search
			<% else %>
				Searching <%= @selected_collections.length.to_s + " collection".pluralize(@selected_collections.length) %>:<br>
			<% end %>

			<% @selected_collections.length.times do |c| %>
				<% spacer = (c == (@selected_collections.length - 1) ? "" : ", ") %>
				<%= link_to(@selected_collections[c].title, collection_path(@selected_collections[c])) + spacer %>
			<% end %>
		</h5>
	</div>

	<!-- NEW TERM RECORD BUTTON HERE -->
</div>

<div class="row search-bar">
  <div class="small-11 columns">
  	<%= form_tag(query_path, method: :get) do %>
	    <div class="row collapse">
		      <div class="small-6 large-8 columns">
		      	<%= text_field_tag "search", nil, placeholder: "Search terms" %>

		      </div>
		      <div class="small-1 columns">
		      	<%= submit_tag "Go", class: "button postfix radius" %>
		      </div>
		      <div class="small-4 large-2 columns right">
		      	<%= select_tag "field", options_for_select(set_fields, params[:field] || "All") %>
		      </div>
	    </div>
    <% end %>
  </div>
</div>

<% if @term_records.present? %>
	<table class="records-table">
		<thead>
			<tr>
				<% set_columns.each do |lang| %>
					<th class="lang-column" width="<%= 60 / set_columns.length %>%"><%= lang.capitalize %></th>
				<% end %>
				<th class="source-column">Source</th>
				<th class="domain-column">Domain</th>
				<th class="expander-column"></th>
			</tr>
		</thead
		<tbody>
			<%= render @term_records %>
		</tbody>
	</table>
<% elsif @selected_collections.present? %>
	<h5 class="subheader">No results, sorry</h5>
<% end %>